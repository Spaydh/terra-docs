<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.11/dist/katex.min.css" integrity="sha384-Um5gpz1odJg5Z4HAmzPtgZKdTBHZdw8S29IecapCSB31ligYPhHQZMIlWLYQGVoc" crossorigin="anonymous"><title data-react-helmet="true">Tokens: stLuna and bLuna | Lido Terra docs</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://docs.terra.lido.fi/contracts/stLuna_and_bLuna"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Tokens: stLuna and bLuna | Lido Terra docs"><meta data-react-helmet="true" name="description" content="stLuna and bLuna tokens are assets built for the Terra blockchain, their value backed by underlying Luna delegations. stLuna and bLuna tokens follow full compliance with the Cw20 standard, having the potential to be integrated into a wide variety of decentralized finance applications."><meta data-react-helmet="true" property="og:description" content="stLuna and bLuna tokens are assets built for the Terra blockchain, their value backed by underlying Luna delegations. stLuna and bLuna tokens follow full compliance with the Cw20 standard, having the potential to be integrated into a wide variety of decentralized finance applications."><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://docs.terra.lido.fi/contracts/stLuna_and_bLuna"><link data-react-helmet="true" rel="alternate" href="https://docs.terra.lido.fi/contracts/stLuna_and_bLuna" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://docs.terra.lido.fi/contracts/stLuna_and_bLuna" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.54b1802a.css">
<link rel="preload" href="/assets/js/runtime~main.ae7859e0.js" as="script">
<link rel="preload" href="/assets/js/main.19aa79c7.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="Lido Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo.svg" alt="Lido Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">Lido Terra Docs</b></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/lidofinance" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><div class="navbar__search searchBarContainer_MM2z"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_s5VG searchBarLoadingRing_2jQk"><div></div><div></div><div></div><div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Introduction</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Contracts</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/contracts/hub">Hub</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/contracts/reward">Reward</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/contracts/rewards_dispatcher">Rewards Dispatcher</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/contracts/validators_registry">Validators Registry</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/contracts/airdrop-registry">Airdrop Registry</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/contracts/stLuna_and_bLuna">Tokens: stLuna and bLuna</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Internals</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Web App</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Tokens: stLuna and bLuna</h1></header><p>stLuna and bLuna tokens are assets built for the Terra blockchain, their value backed by underlying Luna delegations. stLuna and bLuna tokens follow full compliance with the Cw20 standard, having the potential to be integrated into a wide variety of decentralized finance applications.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="base"></a>Base<a class="hash-link" href="#base" title="Direct link to heading">#</a></h2><p>This handles balances and transfers. Note that all amounts are
handled as <code>Uint128</code> (128 bit integers with JSON string representation).
Handling decimals is left to the UI and not interpreted</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="messages"></a>Messages<a class="hash-link" href="#messages" title="Direct link to heading">#</a></h3><p><code>Transfer{recipient, amount}</code> - Moves <code>amount</code> tokens from the
<code>env.sender</code> account to the <code>recipient</code> account. This is designed to
send to an address controlled by a private key and <em>does not</em> trigger
any actions on the recipient if it is a contract.</p><p><code>Send{contract, amount, msg}</code> - Moves <code>amount</code> tokens from the
<code>env.sender</code> account to the <code>recipient</code> account. <code>contract</code> must be an
address of a contract that implements the <code>Receiver</code> interface. The <code>msg</code>
will be passed to the recipient contract, along with the amount.</p><p><code>Burn{amount}</code> - Remove <code>amount</code> tokens from the balance of <code>env.sender</code>
and reduce <code>total_supply</code> by the same amount.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="queries"></a>Queries<a class="hash-link" href="#queries" title="Direct link to heading">#</a></h3><p><code>Balance{address}</code> - Returns the balance of the given address.
Returns &quot;0&quot; if the address is unknown to the contract. Return type
is <code>BalanceResponse{balance}</code>.</p><p><code>TokenInfo{}</code> - Returns the token info of the contract. Return type is
<code>TokenInfoResponse{name, symbol, decimal, total_supply}</code>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="receiver"></a>Receiver<a class="hash-link" href="#receiver" title="Direct link to heading">#</a></h3><p>The counter-part to <code>Send</code> is <code>Receive</code>, which must be implemented by
any contract that wishes to manage CW20 tokens. This is generally <em>not</em>
implemented by any CW20 contract.</p><p><code>Receive{sender, amount, msg}</code> - This is designed to handle <code>Send</code>
messages. The address of the contract is stored in <code>env.sender</code>
so it cannot be faked. The contract should ensure the sender matches
the token contract it expects to handle, and not allow arbitrary addresses.</p><p>The <code>sender</code> is the original account requesting to move the tokens
and <code>msg</code> is a <code>Binary</code> data that can be decoded into a contract-specific
message. This can be empty if we have only one default action,
or it may be a <code>ReceiveMsg</code> variant to clarify the intention. For example,
if I send to a uniswap contract, I can specify which token I want to swap
against using this field.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="allowances"></a>Allowances<a class="hash-link" href="#allowances" title="Direct link to heading">#</a></h2><p>A contract may allow actors to delegate some of their balance to other
accounts. This is not as essential as with ERC20 as we use <code>Send</code>/<code>Receive</code>
to send tokens to a contract, not <code>Approve</code>/<code>TransferFrom</code>. But it
is still a nice use-case, and you can see how the Cosmos SDK wants to add
payment allowances to native tokens. This is mainly designed to provide
access to other public-key-based accounts.</p><p>There was an issue with race conditions in the original ERC20 approval spec.
If you had an approval of 50 and I then want to reduce it to 20, I submit a
Tx to set the allowance to 20. If you see that and immediately submit a tx
using the entire 50, you then get access to the other 20. Not only did you quickly
spend the 50 before I could reduce it, you get another 20 for free.</p><p>The solution discussed in the Ethereum community was an <code>IncreaseAllowance</code>
and <code>DecreaseAllowance</code> operator (instead of <code>Approve</code>). To originally set
an approval, use <code>IncreaseAllowance</code>, which works fine with no previous allowance.
<code>DecreaseAllowance</code> is meant to be robust, that is if you decrease by more than
the current allowance (eg. the user spent some in the middle), it will just round
down to 0 and not make any underflow error.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="messages-1"></a>Messages<a class="hash-link" href="#messages-1" title="Direct link to heading">#</a></h3><p><code>IncreaseAllowance{spender, amount, expires}</code> - Set or increase the allowance
such that <code>spender</code> may access up to <code>amount + current_allowance</code> tokens
from the <code>env.sender</code> account. This may optionally come with an <code>Expiration</code>
time, which if set limits when the approval can be used (by time or height).</p><p><code>DecreaseAllowance{spender, amount, expires}</code> - Decrease or clear the allowance
such that <code>spender</code> may access up to <code>current_allowance - amount</code> tokens
from the <code>env.sender</code> account. This may optionally come with an <code>Expiration</code>
time, which if set limits when the approval can be used (by time or height).
If <code>amount &gt;= current_allowance</code>, this will clear the allowance (delete it).</p><p><code>TransferFrom{owner, recipient, amount}</code> - This makes use of an allowance
and if there was a valid, un-expired pre-approval for the <code>env.sender</code>,
then we move <code>amount</code> tokens from <code>owner</code> to <code>recipient</code> and deduct it
from the available allowance.</p><p><code>SendFrom{owner, contract, amount, msg}</code> - <code>SendFrom</code> is to <code>Send</code>, what
<code>TransferFrom</code> is to <code>Transfer</code>. This allows a pre-approved account to
not just transfer the tokens, but to send them to another contract
to trigger a given action. <strong>Note</strong> <code>SendFrom</code> will set the <code>Receive{sender}</code>
to be the <code>env.sender</code> (the account that triggered the transfer)
rather than the <code>owner</code> account (the account the money is coming from).
This is an open question whether we should switch this?</p><p><code>BurnFrom{owner, amount}</code> - This works like <code>TransferFrom</code>, but burns
the tokens instead of transfering them. This will reduce the owner&#x27;s
balance, <code>total_supply</code> and the caller&#x27;s allowance.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="queries-1"></a>Queries<a class="hash-link" href="#queries-1" title="Direct link to heading">#</a></h3><p><code>Allowance{owner, spender}</code> - This returns the available allowance
that <code>spender</code> can access from the <code>owner</code>&#x27;s account, along with the
expiration info. Return type is <code>AllowanceResponse{balance, expiration}</code>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="mintable"></a>Mintable<a class="hash-link" href="#mintable" title="Direct link to heading">#</a></h2><p>This allows another contract to mint new tokens, possibly with a cap.
There is only one minter specified here, if you want more complex
access management, please use a multisig or other contract as the
minter address and handle updating the ACL there.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="messages-2"></a>Messages<a class="hash-link" href="#messages-2" title="Direct link to heading">#</a></h3><p><code>Mint{recipient, amount}</code> - If the <code>env.sender</code> is the allowed minter,
this will create <code>amount</code> new tokens (updating total supply) and
add them to the balance of <code>recipient</code>, as long as it does not exceed the cap.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="queries-2"></a>Queries<a class="hash-link" href="#queries-2" title="Direct link to heading">#</a></h3><p><code>Minter{}</code> - Returns who and how much can be minted. Return type is
<code>MinterResponse {minter, cap}</code>. Cap may be unset.</p><p>If the cap is set, it defines the maximum <code>total_supply</code> that may ever exist.
If initial supply is 1000 and cap is <code>Some(2000)</code>, you can only mint 1000 more tokens.
However, if someone then burns 500 tokens, the minter can mint those 500 again.
This allows for dynamic token supply within a set of parameters, especially when
the minter is a smart contract.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="enumerable"></a>Enumerable<a class="hash-link" href="#enumerable" title="Direct link to heading">#</a></h2><p>This should be enabled with all blockchains that have iterator support.
It allows us to get lists of results with pagination.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="marketing"></a>Marketing<a class="hash-link" href="#marketing" title="Direct link to heading">#</a></h2><p>This allows us to attach more metadata on the token to help with displaying the token in
wallets. When you see a token&#x27;s website, then see it in a wallet, you know what it is.
However, if you see it in a wallet or a DEX trading pair, there is no clear way to find out
any more info about it.</p><p>This extension allows us to attach more &quot;Marketing&quot; metadata, which has no effect on the
on-chain functionality of the token, but is very useful in providing a better client-side
experience. Note, that we add a new role <code>marketing</code>, which can update such info, but not
affect on-chain logic.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="messages-3"></a>Messages<a class="hash-link" href="#messages-3" title="Direct link to heading">#</a></h3><p><code>UploadLogo{url | embedded}</code> - If the <code>env.sender</code> is the allowed marketing account,
this will either set a new URL reference where the logo is served, or allow them to upload
a small (less than 5KB) SVG or PNG logo onto the blockchain to be served.</p><p><code>UpdateMarketing{project, description, marketing}</code> - If the <code>env.sender</code> is the allowed marketing
account, this will update some marketing-related metadata on the contract.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="queries-3"></a>Queries<a class="hash-link" href="#queries-3" title="Direct link to heading">#</a></h3><p><code>MarketingInfo{}</code> - Returns marketing-related metadata. Return type is
<code>MarketingInfoResponse {project, description, logo, marketing}</code>.</p><p><code>DownloadLogo{}</code> - If the token&#x27;s logo was previously uploaded to the blockchain
(see <code>UploadLogo</code> message), then it returns the raw data to be displayed in a browser.
Return type is <code>DownloadLogoResponse{ mime_type, data }</code>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="queries-4"></a>Queries<a class="hash-link" href="#queries-4" title="Direct link to heading">#</a></h3><p><code>AllAllowances{owner, start_after, limit}</code> - Returns the list of all non-expired allowances
by the given owner. <code>start_after</code> and <code>limit</code> provide pagination.</p><p><code>AllAccounts{start_after, limit}</code> - Returns the list of all accounts that have been created on
the contract (just the addresses). <code>start_after</code> and <code>limit</code> provide pagination.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/facebook/docusaurus/edit/main/website/docs/contracts/stLuna_and_bLuna.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_13-_"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/contracts/airdrop-registry"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Airdrop Registry</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/internals/architecture"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Architecture Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#base" class="table-of-contents__link">Base</a><ul><li><a href="#messages" class="table-of-contents__link">Messages</a></li><li><a href="#queries" class="table-of-contents__link">Queries</a></li><li><a href="#receiver" class="table-of-contents__link">Receiver</a></li></ul></li><li><a href="#allowances" class="table-of-contents__link">Allowances</a><ul><li><a href="#messages-1" class="table-of-contents__link">Messages</a></li><li><a href="#queries-1" class="table-of-contents__link">Queries</a></li></ul></li><li><a href="#mintable" class="table-of-contents__link">Mintable</a><ul><li><a href="#messages-2" class="table-of-contents__link">Messages</a></li><li><a href="#queries-2" class="table-of-contents__link">Queries</a></li></ul></li><li><a href="#enumerable" class="table-of-contents__link">Enumerable</a></li><li><a href="#marketing" class="table-of-contents__link">Marketing</a><ul><li><a href="#messages-3" class="table-of-contents__link">Messages</a></li><li><a href="#queries-3" class="table-of-contents__link">Queries</a></li><li><a href="#queries-4" class="table-of-contents__link">Queries</a></li></ul></li></ul></div></div></div></div></main></div></div></div>
<script src="/assets/js/runtime~main.ae7859e0.js"></script>
<script src="/assets/js/main.19aa79c7.js"></script>
</body>
</html>